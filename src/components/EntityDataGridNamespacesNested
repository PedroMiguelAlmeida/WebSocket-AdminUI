import React, { useState } from "react";
import { Box, useMediaQuery, useTheme } from "@mui/material";
import { DataGrid } from "@mui/x-data-grid";
import { useGetRoomsQuery } from "../state/api";
import { tokens } from "../theme";
import { Routes, Route } from "react-router-dom";
import Header from "./Header";
import EntityDataGridRooms from "./EntityDataGridRooms";

const EntityDataGridNamespacesNested = () => {
    const theme = useTheme();
    const colors = tokens(theme.palette.mode);
    const { data, isLoading } = useGetRoomsQuery("namespaceDefault");
    const columns = [
      {
        field: "namespace",
        headerName: "Namespace",
        flex: 1,
      },
      {
        field: "amountRooms",
        headerName: "NÂº Rooms",
        flex: 1,
      },
    ];
    return (
      <Box mt="40px" height="75vh">
        <DataGrid
          loading={isLoading || !data}
          getRowId={(row) => row.id}
          rows={
            data
              ? data.map((entry) => ({
                  id: entry._id,
                  namespace: entry.namespace,
                  amountRooms: data.length,
                }))
              : []
          }
          columns={columns}
        />
      </Box>
    );
  };

export default EntityDataGridNamespacesNested;
